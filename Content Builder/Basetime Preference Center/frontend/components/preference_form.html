/*
What is this component?
*/
Vue.component('preference-form', {
  props: {
    branding: Object,
    preferenceOptions: Object,
    channelSelection: String
  },
  mounted() {

  },
  data() {
    return {
     values: {}
    }
  },
  watch: {

  },
  computed: {
    preferenceChoices() {
      if (this.channelSelection) {
        return this.preferenceOptions[this.channelSelection]['preferences']
      }
    },
    preferenceFormSchema() {
      let preferenceSchema = [
        {
          "component": "h2",
          "children": `${this.preferenceOptions[this.channelSelection]['headline']}`
        },
        {
          "component": "p",
          "children": `${this.preferenceOptions[this.channelSelection]['copy']}`
        },
        {
          "label": "Email Address",
          "name": "email"
        },
        {
          "component": "v-col",
          "class": "d-flex",
          "children": [
            {
              "name": "preferenceChoice",
              "type": "radio",
              "class": "mr-16",
              "options": this.preferenceChoices.map(pref => {return { value: pref.field, label: pref.label}})
            }
          ]
        },
        {
          "type": "submit"
        }
      ]

      return preferenceSchema
    }
  },
  template: `
<section>
  <v-row class="flex">
    <v-col cols="8" class="justify-center">
      <div v-if="channelSelection">
        <formulate-form
          v-model="values"
          :schema="preferenceFormSchema"
        />
      </div>
    </v-col>
  </v-row>
</section>
`
})