new Vue({
  el: '#app',
  vuetify: new Vuetify(),
  data () { 
    return {
      darkMode: false,
      debug: true,
      applicationConfiguration,
      preferenceOptions,
      channelSelection: null,
      formSubmitting: false,
      subscriber: {
        subscriberId: '12345',
        emailAddress: 'tony.zupancic@gmail.com'
      }
    }
  },
  mounted () {
    this.debug && this.debugData();
  },
  methods: {
    debugData() {
      console.log({
        config: this.applicationConfiguration,
        preferenceOptions: this.preferenceOptions
      })
    },
    onUpdateDarkMode() {
      this.darkMode = !this.darkMode
    },
    onUpdateChannelSelection($event) {
      this.channelSelection = $event
    },
    async onSubmitPreferenceForm($event) {
      try {

        const submitRequest = await axios.post(`${this.apiBaseURL}submitPreferenceForm`, {
          subscriber: this.subscriber,
          channel: this.channelSelection,
          formInputs: $event
        })
        
        console.log(submitRequest)

      } catch (err) {
        console.log(err)
      }
    }
  },
  computed: {
    apiBaseURL(){
      return `${this.applicationConfiguration.apiBaseURL}?action=`
    },
    branding(){
      if(this.applicationConfiguration.branding.supportDarkMode && this.darkMode){
        return this.applicationConfiguration.branding.dark
      }

      return this.applicationConfiguration.branding.default
    }
  }
})